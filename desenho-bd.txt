CREATE TABLE USER(
	id int identity primary key,
	username varchar(50) not null,
	email varchar(50) not null,
	password varchar(70) not null,	
	born DATE NOT NULL,
	photo varchar(200),
)

CREATE TABLE FORUM(
	id int identity primary key,
	title varchar(50) not null,
	description varchar(100) not null,
	photo varchar(200),
	createdAt DATETIME,
	FK_Owner int not null,
	foreign key(FK_Owner) REFERENCES User(Id)
)

CREATE TABLE POST(
	id int identity primary key,
	content varchar(500),
	createdAt DATETIME,
	FK_User int not null,
	FK_Forum int not null,
	foreign key(FK_USER) REFERENCES User(Id),
	foreign key(FK_Forum) REFERENCES Forum(Id)
)

CREATE TABLE LIKES(
	id int identity primary key,
	value smallint,
	FK_User int,
	FK_Post int,
	FOREIGN KEY(FK_User) REFERENCES User(Id),
	FOREIGN KEY(FK_Post) REFERENCES Post(Id)
)

CREATE TABLE COMMENT(
	Id int primary key,
	content varchar(300),
	createdAt DATETIME,
	FK_Post int not null,
	FK_User int not null,
	foreign key(FK_Post) REFERENCES Post(Id),
	foreign key(FK_User) REFERENCES User(Id)
	PRIMARY KEY(FK_Post, FK_User)
)

CREATE TABLE FAVORITES(
	FK_User int not null,
	FK_Forum int not null,
	foreign key(FK_User) references User(Id),
	foreign key(FK_Post) references Post(Id),
	PRIMARY KEY(FK_User, FK_Forum)
)

CREATE TABLE ROLE(
	id int identity primary key,
	name VARCHAR(20)
)

CREATE TABLE PERMISSION(
	id int identity primary key,
	tier int,
	name VARCHAR(20)
)

CREATE TABLE RoleXPermission(
	FK_Role int not null,
	FK_Permission int not null,
	foreign key(FK_Role) references Role(Id),
	foreign key(FK_Permission) references Permission(Id),
	PRIMARY KEY(FK_Role, FK_Permission)
)

CREATE TABLE ForumXUserRole(
	FK_User int not null,
	FK_Role int not null,
	FK_Forum int not null,
	FOREIGN KEY(FK_User) REFERENCES User(Id),
	FOREIGN KEY(FK_Role) REFERENCES Role(Id),
	FOREIGN KEY(FK_Forum) REFERENCES Forum(Id),
	PRIMARY KEY(FK_User, FK_Role, FK_Forum)
)